<div class="container">
    <div class="row d-flex justify-content-center p-2">
        <form [formGroup]="form" (submit)="onSubmit()" class="col-sm-12 col-md-8 col-lg-5 bg-secondary p-3 " id="signup_container" >
            
            <div class="col-3 mt-5" id="profile_container_container">
                <img [src]=" imgUrl || '../../../../assets/images/Add_Photo.png'" alt="">
                <input type="file" [readOnly]="loading" class="form-control" (change)="previewImage($event)" formControlName="imgUrl" name="imgUrl" id="imgUrl"  placeholder="" aria-describedby="fileHelpId"/>
            </div>

            <div class="col-10 mt-lg-5">
                <label for="username" class="form-label">Username</label>
                <input type="text" [readOnly]="loading" class="form-control" formControlName="username" name="username" id="username" aria-describedby="helpId" placeholder="Type Here:"/>
            </div>

            <div class="col-10 d-flex justify-content-between">
                <div class="col-6 p-sm-0 p-lg-1">
                    <label for="firstName" class="form-label">First Name</label>
                    <input type="text" [readOnly]="loading" class="form-control" name="firstName" formControlName="firstName" id="firstName" aria-describedby="helpId" placeholder="Type Here:"/>
                </div>
                <div class="col-6 p-sm-0 p-lg-1 ">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" [readOnly]="loading" class="form-control" name="lastName" formControlName="lastName" id="lastName" aria-describedby="helpId" placeholder="Type Here:"/>
                </div>
            </div>
            <div class="col-10 " formGroupName="address">
                <label for="address" class="form-label">Address</label>
                <input type="text" class="form-control" readonly formControlName="locality" name="locality" id="locality" #locality aria-describedby="helpId" placeholder="Locality:" data-bs-toggle="modal" data-bs-target="#modalLocalityId" [disabled]="loading"/>
                <input type="text" class="form-control mt-1" readonly formControlName="municipality" name="municipality" id="municipality" #municipality aria-describedby="helpId" placeholder="Municipality:" data-bs-toggle="modal" data-bs-target="#modalMunicipalityId" [disabled]="loading"/>
                <input type="text" class="form-control mt-1" readonly formControlName="province" name="province" id="province" #province aria-describedby="helpId" placeholder="Province:" data-bs-toggle="modal" data-bs-target="#modalProvinceId" [disabled]="loading"/>
            </div>
            <div class="col-10 ">
                <label for="email" class="form-label">Email</label>
                <input type="email" [readOnly]="loading" class="form-control" formControlName="email" name="email" id="email" aria-describedby="helpId" placeholder="Type Here:"/>
                
            </div>
            <div class="col-10 ">
                <label for="password" class="form-label">Password</label>
                <input type="password" [readOnly]="loading" class="form-control" formControlName="password" name="password" id="password" aria-describedby="helpId" placeholder="Type Here:"/>
            </div>
            <div class="col-10 mb-lg-5 ">
                <label for="repeatPassword" class="form-label">Repeat Password</label>
                <input type="password" [readOnly]="loading" class="form-control" formControlName="repeatPassword" name="repeatPassword"  id="repeatPassword" aria-describedby="helpId" placeholder="Type Here:"/>
            </div>

            <div class="col-10 button_group">
                <button type="submit" class="btn btn-primary col-10" [disabled]="loading">
                    Sign Up
                </button>
                @if(loading == true) {
                    <div class="btn btn-light col-10 disabled" >
                        Sign Up
                    </div>
                }@else {
                    <div class="btn btn-light col-10"  routerLink="../signin" >
                        Sign In
                    </div>
                }
                
            </div>
        </form>
    </div>
</div>

<div class="container-loading bg-light" *ngIf="loading">
    <div class="row">
        <div class="col-12 loading-container">
            <h2>Ingresando...</h2>
            <div class="d-flex justify-content-center align-items-center">
                <div class="spinner-border text-primary spinner-border-sm" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
            
        </div>
    </div>
</div>

<app-localities-modal [commingFrom]="'signup'" (sendLocality)="receiveLocality($event)" class="modal fade" id="modalLocalityId" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false" role="dialog" aria-labelledby="modalTitleId" aria-hidden="true"></app-localities-modal>

<app-municipalities-modal [commingFrom]="'signup'" (sendMunicipality)="receiveMunicipality($event)" class="modal fade" id="modalMunicipalityId" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false" role="dialog" aria-labelledby="modalTitleId" aria-hidden="true"></app-municipalities-modal>

<app-provinces-modal [commingFrom]="'signup'" (sendProvinces)="receiveProvince($event)" class="modal fade" id="modalProvinceId" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false" role="dialog" aria-labelledby="modalTitleId" aria-hidden="true"></app-provinces-modal>